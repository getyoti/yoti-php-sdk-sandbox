# Yoti PHP Sandbox SDK

This repo contains the tools you need to test your Yoti integration.

## Enabling the SDK

Add the Yoti SDK dependency:

```console
$ composer require yoti/yoti-php-sdk-sandbox
```

## Client Initialisation

The YotiClient is the SDK entry point. To initialise it you need to include the following snippet inside your endpoint initialisation section:

```php
<?php
require_once './vendor/autoload.php';

use Yoti\Sandbox\SandboxClient;

try {
    $client = new SandboxClient('YOUR_SDK_ID', 'path/to/your-pem-file.pem');
} catch(Exception $e) {
    // Handle unhappy path
}
```

Where:

* `YOUR_SDK_ID` is the identifier generated by Yoti Hub when you create your app.
* `PATH/TO/YOUR/APPLICATION/KEY_PAIR.pem` is the path to the pem file your browser generates for you, when you create your app on Yoti Hub.

## Profile Token Creation

```php
<?php
use Yoti\Sandbox\SandboxClient;
use Yoti\Sandbox\Profile\Request\TokenRequestBuilder;

try {
    $client = new SandboxClient('YOUR_SDK_ID', 'path/to/your-pem-file.pem');

    $tokenRequest = (new TokenRequestBuilder())
        ->setGivenNames()
        ->build();

    $token = $client->setupSharingProfile($tokenRequest)->getToken();
} catch(Exception $e) {
    // Handle unhappy path
}
```
